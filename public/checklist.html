<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <title></title>
    <script type="module" src="./js/script_checklist.js"></script>
</head>
<body>
<div class="container" id="container">

    <!-- Navigation -->
    <div class="link-container">
        <div class="link-icon">
            <a href="./" class="link-icon-text">
                <i class="fa fa-solid fa-house fa-lg fa-border"></i>
            </a>
        </div>
        <div class="link-icon">
            <a id="back-link" href="#" class="link-icon-text" title="Return to Game Page">
                <i class="fa fa-arrow-left fa-lg fa-border"></i>
            </a>
        </div>
    </div>

    <!-- Page headings -->
    <h1 id="game-name"></h1>
    <h2>100% Completion Checklist</h2>
    <h3>Section: <span id="section-group-name"></span></h3>

    <!-- Controls panel -->
    <div class="controls-panel">
        <input id="filter-input" type="text" placeholder="Filter by name or description..." class="filter-input">
        <div class="controls-toggles">
            <label class="switch">
                <input type="checkbox" id="hide-completed-toggle" checked>
                <span class="slider"></span>Show Completed
            </label>
            <label class="switch">
                <input type="checkbox" id="expand-all-toggle">
                <span class="slider"></span>Expand All
            </label>
        </div>
    </div>

    <p id="total-completion">Total Completion: 0%</p>

    <!-- Checklist content rendered here by JS -->
    <div id="grid-checklist-container"></div>
</div>

<!-- Add Record Modal -->
<div id="add-record-modal" class="modal hidden">
    <div class="modal-content">
        <span class="close-modal">&times;</span>
        <h3 id="modal-section-name" style="margin-bottom: 12px;"></h3>
        <form id="new-record-form" class="add-record-container">
            <label class="switch multi-toggle">
                <input type="checkbox" id="multi-mode-toggle">
                <span class="slider"></span>Add Multiple
            </label>
            <label class="add-record" id="single-name-label">Name:<input type="text" id="recordName" class="add-record" required></label>
            <label class="add-record hidden" id="multi-name-label">Names (one per line):<textarea id="recordNames" class="add-record" rows="6" placeholder="Record One&#10;Record Two&#10;Record Three"></textarea></label>
            <label class="add-record">Description:<textarea id="description" class="add-record" rows="3"></textarea></label>
            <label class="add-record">Number of Checkboxes:<input type="number" id="numberOfCheckboxes" class="add-record default-value" min="0" value="1" required></label>
            <label class="add-record">Number Already Completed:<input type="number" id="numberAlreadyCompleted" class="add-record default-value" min="0" value="0" required></label>
            <label class="add-record">List Order:<input type="number" id="listOrder" class="add-record default-value" min="0" value="100" required></label>
            <label class="add-record">Long Description:<textarea id="longDescription" class="add-record" rows="5"></textarea></label>
            <label class="modern-checkbox add-record">
                <input type="checkbox" id="hidden">
                <span class="checkmark"></span>
                Hidden
            </label>
            <div class="button-container">
                <button type="submit" id="save-record-button" class="save-button">Save Record</button>
                <button type="button" id="reset-record-button" class="reset-button">Reset Changes</button>
            </div>
            <div id="loading-spinner" class="spinner hidden"></div>
            <div id="success-message" class="success-message hidden">Record saved successfully!</div>
        </form>
    </div>
</div>

<!-- ===================== TEMPLATES ===================== -->

<!-- Section header (collapsible accordion bar) -->
<template id="section-header-template">
    <div class="section-header">
        <span class="section-header-text"></span>
        <button class="section-add-btn" title="Add record to this section">+</button>
        <span class="section-header-icon">
            <i class="fas fa-chevron-down"></i>
        </span>
    </div>
</template>

<!-- Section body (content area below the header) -->
<template id="section-body-template">
    <div class="section"></div>
</template> 

<!-- Single checklist item (record row with label, optional description, and checkboxes) -->
<template id="checklist-item-template">
    <div class="checklist-item">
        <div class="column2"></div>
        <div class="column1"> 
            <div class="label"></div>
            <div class="description"></div>
        </div>
    </div>
</template>

</body>
</html>
